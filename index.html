<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculateur de saut VTT Freeride</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 600px;
      margin: auto;
      padding: 1em;
      background: #f0f4f8;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    label {
      display: block;
      margin-top: 1em;
      font-weight: 600;
    }
    input, select {
      padding: 0.5em;
      margin-top: 0.3em;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 1em;
    }
    button {
      margin-top: 1.5em;
      padding: 0.7em;
      font-size: 1.1em;
      width: 100%;
      background-color: #3498db;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #2980b9;
    }
    .result {
      margin-top: 1.5em;
      padding: 1em;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      font-size: 1.1em;
      min-height: 70px;
    }
    .options {
      margin-top: 1em;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .option-group {
      margin-bottom: 1em;
    }
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 0.5em;
      cursor: pointer;
      font-weight: 600;
    }
    .footer {
      margin-top: 2em;
      font-size: 0.9em;
      color: #555;
      text-align: center;
    }
    .social-links {
      margin-top: 1em;
      display: flex;
      justify-content: center;
      gap: 1.5em;
    }
    .social-links a {
      text-decoration: none;
      color: #3498db;
      font-weight: 700;
      transition: color 0.3s ease;
    }
    .social-links a:hover {
      color: #1d6fa5;
    }
  </style>
</head>
<body>
  <h1>Calculateur de saut VTT Freeride</h1>

  <label for="speed">Vitesse initiale :</label>
  <input type="text" id="speed" placeholder="ex : 36 ou 10,5" />
  <select id="speedUnit">
    <option value="ms">m/s</option>
    <option value="kmh" selected>km/h</option>
  </select>

  <label for="angle">Angle :</label>
  <input type="text" id="angle" placeholder="ex : 45 ou 0,785" />
  <select id="angleUnit">
    <option value="deg" selected>degr√©s</option>
    <option value="rad">radians</option>
  </select>

  <label for="target">Port√©e souhait√©e (m√®tres) :</label>
  <input type="text" id="target" placeholder="ex : 10 ou 10,5" />

  <div class="options">
    <div class="option-group">
      <label class="checkbox-label" for="popCheck">
        <input type="checkbox" id="popCheck" />
        Simuler le "pop" (impulsion suppl√©mentaire √† la sortie du saut)
      </label>
    </div>
    <div class="option-group">
      <label class="checkbox-label" for="frictionCheck">
        <input type="checkbox" id="frictionCheck" />
        Simuler les frottements (r√©duit la port√©e)
      </label>
    </div>
    <div class="option-group">
      <label class="checkbox-label" for="windCheck">
        <input type="checkbox" id="windCheck" />
        Simuler le vent
      </label>
      <div style="margin-top: 0.5em; padding-left: 1.5em;">
        <label for="windSpeed">Vitesse du vent (m/s) :</label>
        <input type="text" id="windSpeed" placeholder="ex : 5" disabled />
        <label for="windAngle">Direction du vent (¬∞) (0 = vent de face, 180 = vent dans le dos) :</label>
        <input type="text" id="windAngle" placeholder="ex : 0" disabled />
      </div>
    </div>
  </div>

  <button onclick="calculer()">Calculer</button>

  <div class="result" id="resultat"></div>

  <div class="social-links">
    <a href="https://www.instagram.com/mega__shred/" target="_blank" rel="noopener noreferrer">Instagram</a>
    <a href="https://www.youtube.com/channel/UCzrMXoQNUS7lzOdxzoR7H1w" target="_blank" rel="noopener noreferrer">YouTube</a>
  </div>

  <div class="footer">
    <p><em>Simulation se rapprochant de la r√©alit√©. La vitesse saisie correspond √† la vitesse √† la sortie du saut, pas avant.</em></p>
  </div>

  <script>
    // Activation/d√©sactivation des inputs vent selon checkbox
    document.getElementById('windCheck').addEventListener('change', function() {
      const enabled = this.checked;
      document.getElementById('windSpeed').disabled = !enabled;
      document.getElementById('windAngle').disabled = !enabled;
    });

    function parseInput(value) {
      return parseFloat(value.replace(',', '.'));
    }

    function calculer() {
      const g = 9.81;

      let v = parseInput(document.getElementById("speed").value);
      let vUnit = document.getElementById("speedUnit").value;
      let a = parseInput(document.getElementById("angle").value);
      let aUnit = document.getElementById("angleUnit").value;
      let target = parseInput(document.getElementById("target").value);

      if (isNaN(v) || isNaN(a)) {
        document.getElementById("resultat").innerHTML = "<span style='color:red;'>Veuillez entrer des nombres valides pour la vitesse et l'angle.</span>";
        return;
      }

      if (vUnit === "kmh") v = v / 3.6;
      if (aUnit === "deg") a = a * Math.PI / 180;

      // Ajout du pop (impulsion)
      if (document.getElementById('popCheck').checked) {
        // Le pop ajoute un boost en fonction de l'angle : plus faible angle = plus de port√©e (exemple)
        // On prend 15% de la vitesse initiale en plus max, pond√©r√© par cos(angle)
        let popBoost = 0.15 * v * Math.cos(a);
        v += popBoost;
      }

      // Simulation du vent
      if (document.getElementById('windCheck').checked) {
        let windSpeed = parseInput(document.getElementById('windSpeed').value);
        let windAngle = parseInput(document.getElementById('windAngle').value);

        if (isNaN(windSpeed) || isNaN(windAngle)) {
          document.getElementById("resultat").innerHTML = "<span style='color:red;'>Veuillez entrer des nombres valides pour la vitesse et la direction du vent.</span>";
          return;
        }

        let windAngleRad = windAngle * Math.PI / 180;

        // Vent de face ralentit, vent dans le dos acc√©l√®re
        let ventEffect = - windSpeed * Math.cos(windAngleRad - a);

        v += ventEffect;

        if (v < 0) v = 0;
      }

      let port√©e = (v * v * Math.sin(2 * a)) / g;

      if (document.getElementById('frictionCheck').checked) {
        port√©e *= 0.85; // r√©duction arbitraire de 15% pour frottements
      }

      let resultat = "<strong>Port√©e calcul√©e :</strong> " + port√©e.toFixed(2) + " m<br>";

      if (!isNaN(target)) {
        if (port√©e < target) {
          resultat += "üí° <em>La port√©e est inf√©rieure √† la cible.</em>";
        } else if (port√©e > target) {
          resultat += "üí° <em>La port√©e est sup√©rieure √† la cible.</em>";
        } else {
          resultat += "‚úÖ <em>La port√©e correspond exactement √† la cible.</em>";
        }
      }

      document.getElementById("resultat").innerHTML = resultat;
    }
  </script>
</body>
</html>
